{"ast":null,"code":"import { AUTHORIZE, OUT_AUTHORIZE, MESSAGE, MESSAGES } from \"../action-types\";\nimport io from \"socket.io-client\";\nlet socket;\nconst ENDPOINT = \"localhost:5000\";\nconst initialState = {\n  user: {\n    email: localStorage.getItem('email'),\n    sessid: localStorage.getItem('sessid')\n  },\n  message: {\n    title: null\n  }\n};\n\nfunction rootReducer(state = initialState, action) {\n  if (action.type === OUT_AUTHORIZE) {\n    localStorage.removeItem('email');\n    localStorage.removeItem('sessid');\n    console.log(state.user.sessid);\n    disconnect();\n    return Object.assign({}, state, {\n      user: {\n        email: '',\n        sessid: ''\n      }\n    });\n  }\n\n  function disconnect() {\n    socket.emit('disconnect');\n  }\n\n  if (action.type === AUTHORIZE) {\n    let email = action.payload.email;\n    let sessid = action.payload.sessid;\n    socket = io(ENDPOINT);\n    localStorage.setItem('email', email);\n    localStorage.setItem('sessid', sessid);\n    return Object.assign({}, state, {\n      user: {\n        email,\n        sessid\n      }\n    });\n  }\n\n  if (action.type === MESSAGE) {\n    console.log(action.payload.text);\n  }\n\n  return state;\n}\n\nexport default rootReducer;","map":{"version":3,"sources":["/Users/strong/worck/study/AppReact/reactAppChat/client/src/store/reducers/index.js"],"names":["AUTHORIZE","OUT_AUTHORIZE","MESSAGE","MESSAGES","io","socket","ENDPOINT","initialState","user","email","localStorage","getItem","sessid","message","title","rootReducer","state","action","type","removeItem","console","log","disconnect","Object","assign","emit","payload","setItem","text"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,aAApB,EAAmCC,OAAnC,EAA4CC,QAA5C,QAA4D,iBAA5D;AACA,OAAOC,EAAP,MAAe,kBAAf;AAEA,IAAIC,MAAJ;AACA,MAAMC,QAAQ,GAAG,gBAAjB;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADH;AAEJC,IAAAA,MAAM,EAAEF,YAAY,CAACC,OAAb,CAAqB,QAArB;AAFJ,GADa;AAKnBE,EAAAA,OAAO,EAAE;AACPC,IAAAA,KAAK,EAAE;AADA;AALU,CAArB;;AAUA,SAASC,WAAT,CAAqBC,KAAK,GAAGT,YAA7B,EAA2CU,MAA3C,EAAmD;AAEjD,MAAIA,MAAM,CAACC,IAAP,KAAgBjB,aAApB,EAAmC;AAEjCS,IAAAA,YAAY,CAACS,UAAb,CAAwB,OAAxB;AACAT,IAAAA,YAAY,CAACS,UAAb,CAAwB,QAAxB;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,KAAK,CAACR,IAAN,CAAWI,MAAvB;AACAU,IAAAA,UAAU;AACV,WAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,KAAlB,EAAyB;AAC9BR,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE,EADH;AAEJG,QAAAA,MAAM,EAAE;AAFJ;AADwB,KAAzB,CAAP;AAMD;;AAED,WAASU,UAAT,GAAsB;AACpBjB,IAAAA,MAAM,CAACoB,IAAP,CAAY,YAAZ;AACD;;AAED,MAAIR,MAAM,CAACC,IAAP,KAAgBlB,SAApB,EAA+B;AAC7B,QAAIS,KAAK,GAAGQ,MAAM,CAACS,OAAP,CAAejB,KAA3B;AACA,QAAIG,MAAM,GAAGK,MAAM,CAACS,OAAP,CAAed,MAA5B;AAEAP,IAAAA,MAAM,GAAGD,EAAE,CAACE,QAAD,CAAX;AAEAI,IAAAA,YAAY,CAACiB,OAAb,CAAqB,OAArB,EAA8BlB,KAA9B;AACAC,IAAAA,YAAY,CAACiB,OAAb,CAAqB,QAArB,EAA+Bf,MAA/B;AAEA,WAAOW,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,KAAlB,EAAyB;AAC9BR,MAAAA,IAAI,EAAE;AACJC,QAAAA,KADI;AAEJG,QAAAA;AAFI;AADwB,KAAzB,CAAP;AAMD;;AAED,MAAIK,MAAM,CAACC,IAAP,KAAgBhB,OAApB,EAA6B;AAC3BkB,IAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACS,OAAP,CAAeE,IAA3B;AACD;;AAED,SAAOZ,KAAP;AACD;;AAGD,eAAeD,WAAf","sourcesContent":["import { AUTHORIZE, OUT_AUTHORIZE, MESSAGE, MESSAGES } from \"../action-types\";\nimport io from \"socket.io-client\";\n\nlet socket;\nconst ENDPOINT = \"localhost:5000\";\n\nconst initialState = {\n  user: {\n    email: localStorage.getItem('email'),\n    sessid: localStorage.getItem('sessid'),\n  },\n  message: {\n    title: null,\n  }\n};\n\nfunction rootReducer(state = initialState, action) {\n\n  if (action.type === OUT_AUTHORIZE) {\n\n    localStorage.removeItem('email');\n    localStorage.removeItem('sessid');\n\n    console.log(state.user.sessid);\n    disconnect();\n    return Object.assign({}, state, {\n      user: {\n        email: '',\n        sessid: ''\n      }\n    });\n  }\n\n  function disconnect() {\n    socket.emit('disconnect');\n  }\n\n  if (action.type === AUTHORIZE) {\n    let email = action.payload.email\n    let sessid = action.payload.sessid\n\n    socket = io(ENDPOINT);\n\n    localStorage.setItem('email', email);\n    localStorage.setItem('sessid', sessid);\n\n    return Object.assign({}, state, {\n      user: {\n        email,\n        sessid\n      }\n    });\n  }\n\n  if (action.type === MESSAGE) {\n    console.log(action.payload.text);\n  }\n\n  return state;\n}\n\n\nexport default rootReducer;"]},"metadata":{},"sourceType":"module"}